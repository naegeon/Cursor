<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>블로그 | 집꾸미다 - 누수탐지 및 누수피해복구 전문업체</title>
    <meta name="description" content="집꾸미다 블로그에서 누수 관련 유용한 정보와 팁을 확인하세요. 누수 예방부터 대처 방법까지 전문가의 조언을 제공합니다.">
    <!-- Favicon -->
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Main CSS -->
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Blog Page Specific Styles */
        .page-header {
            background-color: var(--primary-color);
            color: white;
            padding: 100px 0 50px;
            margin-bottom: 50px;
            text-align: center;
        }
        
        .page-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .breadcrumb {
            display: flex;
            justify-content: center;
            list-style: none;
        }
        
        .breadcrumb ol {
            display: flex;
            list-style: none;
        }
        
        .breadcrumb li {
            margin: 0 5px;
        }
        
        .breadcrumb li:not(:last-child):after {
            content: '>';
            margin-left: 10px;
        }
        
        .breadcrumb a {
            color: var(--accent-color);
        }
        
        .blog-container {
            display: flex;
            justify-content: space-between;
        }
        
        .blog-main {
            flex: 0 0 70%;
        }
        
        .blog-sidebar {
            flex: 0 0 25%;
        }
        
        .blog-posts {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }
        
        .blog-post {
            flex: 0 0 calc(50% - 15px);
            margin-bottom: 30px;
            background-color: var(--white);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .blog-post:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .blog-post-image {
            height: 200px;
            overflow: hidden;
        }
        
        .blog-post-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .blog-post:hover .blog-post-image img {
            transform: scale(1.05);
        }
        
        .blog-post-content {
            padding: 20px;
        }
        
        .blog-post-category {
            color: var(--primary-color);
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 10px;
            display: inline-block;
        }
        
        .blog-post-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .blog-post-excerpt {
            color: var(--gray);
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .blog-post-meta {
            display: flex;
            justify-content: space-between;
            color: var(--gray);
            font-size: 0.85rem;
        }
        
        .blog-post-date i, .blog-post-author i {
            margin-right: 5px;
        }
        
        /* Sidebar Styles */
        .sidebar-widget {
            background-color: var(--white);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .widget-title {
            font-size: 1.2rem;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }
        
        .widget-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background-color: var(--primary-color);
        }
        
        .search-form {
            display: flex;
        }
        
        .search-input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px 0 0 5px;
            border-right: none;
        }
        
        .search-button {
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 0 15px;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
        }
        
        .category-list, .recent-posts {
            list-style: none;
        }
        
        .category-list li, .recent-posts li {
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            padding-bottom: 10px;
        }
        
        .category-list li:last-child, .recent-posts li:last-child {
            margin-bottom: 0;
            border-bottom: none;
            padding-bottom: 0;
        }
        
        .category-list a, .recent-posts a {
            color: var(--text-color);
            display: flex;
            justify-content: space-between;
            transition: color 0.3s ease, padding-left 0.3s ease;
        }
        
        .category-list a:hover, .recent-posts a:hover {
            color: var(--primary-color);
            padding-left: 5px;
        }
        
        .category-list .count {
            background-color: var(--primary-color);
            color: var(--white);
            padding: 2px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
        }
        
        .tag-cloud {
            display: flex;
            flex-wrap: wrap;
        }
        
        .tag {
            background-color: #f5f5f5;
            color: var(--text-color);
            padding: 5px 10px;
            border-radius: 5px;
            margin: 0 5px 10px 0;
            font-size: 0.9rem;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        .tag:hover {
            background-color: var(--primary-color);
            color: var(--white);
        }
        
        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 40px;
        }
        
        .pagination-item {
            margin: 0 5px;
        }
        
        .pagination-link {
            display: block;
            width: 40px;
            height: 40px;
            line-height: 40px;
            text-align: center;
            background-color: #f5f5f5;
            border-radius: 5px;
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        .pagination-link:hover, .pagination-link.active {
            background-color: var(--primary-color);
            color: var(--white);
        }
        
        .pagination-prev, .pagination-next {
            width: auto;
            padding: 0 15px;
        }
        
        @media screen and (max-width: 992px) {
            .blog-container {
                flex-direction: column;
            }
            
            .blog-main, .blog-sidebar {
                flex: 0 0 100%;
            }
            
            .blog-sidebar {
                margin-top: 40px;
            }
        }
        
        @media screen and (max-width: 768px) {
            .blog-post {
                flex: 0 0 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container header-container">
            <a href="index.html" class="logo">
                <img src="images/logo.png" alt="집꾸미다 로고">
            </a>
            
            <div class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </div>
            
            <nav>
                <ul class="nav-list">
                    <li class="nav-item"><a href="index.html" class="nav-link">홈</a></li>
                    <li class="nav-item"><a href="services.html" class="nav-link">서비스</a></li>
                    <li class="nav-item"><a href="blog.html" class="nav-link">블로그</a></li>
                    <li class="nav-item"><a href="qna.html" class="nav-link">묻고답하기</a></li>
                    <li class="nav-item"><a href="contact.html" class="nav-link">연락처</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1 class="page-title">블로그</h1>
            <nav class="breadcrumb">
                <ol>
                    <li><a href="index.html">홈</a></li>
                    <li>블로그</li>
                </ol>
            </nav>
        </div>
    </section>

    <!-- Blog Section -->
    <section class="section blog">
        <div class="container blog-container">
            <main class="blog-main">
                <div class="blog-posts" id="blog-posts-container">
                    <!-- 블로그 게시물이 여기에 동적으로 표시됩니다 -->
                </div>
                
                <!-- Pagination -->
                <div class="pagination">
                    <a href="#" class="pagination-link pagination-prev"><i class="fas fa-angle-left"></i> 이전</a>
                    <a href="#" class="pagination-link active">1</a>
                    <a href="#" class="pagination-link">2</a>
                    <a href="#" class="pagination-link">3</a>
                    <a href="#" class="pagination-link pagination-next">다음 <i class="fas fa-angle-right"></i></a>
                </div>
            </main>
            
            <aside class="blog-sidebar">
                <!-- Search Widget -->
                <div class="sidebar-widget">
                    <h3 class="widget-title">검색</h3>
                    <form class="search-form" id="blog-search-form">
                        <input type="text" class="search-input" placeholder="검색어를 입력하세요...">
                        <button type="submit" class="search-button"><i class="fas fa-search"></i></button>
                    </form>
                </div>
                
                <!-- Categories Widget -->
                <div class="sidebar-widget">
                    <h3 class="widget-title">카테고리</h3>
                    <ul class="category-list" id="category-list">
                        <!-- 카테고리가 여기에 동적으로 표시됩니다 -->
                    </ul>
                </div>
                
                <!-- Recent Posts Widget -->
                <div class="sidebar-widget">
                    <h3 class="widget-title">최근 게시물</h3>
                    <ul class="recent-posts" id="recent-posts">
                        <!-- 최근 게시물이 여기에 동적으로 표시됩니다 -->
                    </ul>
                </div>
                
                <!-- Tags Widget -->
                <div class="sidebar-widget">
                    <h3 class="widget-title">태그</h3>
                    <div class="tag-cloud" id="tag-cloud">
                        <!-- 태그가 여기에 동적으로 표시됩니다 -->
                    </div>
                </div>
            </aside>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container footer-container">
            <div class="footer-column">
                <h3 class="footer-title">집꾸미다</h3>
                <p>누수탐지 및 누수피해복구 전문업체로서 최신 기술과 풍부한 경험을 바탕으로 고객 만족을 최우선으로 합니다.</p>
                <ul class="social-links">
                    <li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
                    <li><a href="#"><i class="fab fa-instagram"></i></a></li>
                    <li><a href="#"><i class="fab fa-youtube"></i></a></li>
                    <li><a href="#"><i class="fab fa-blog"></i></a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3 class="footer-title">서비스</h3>
                <ul class="footer-links">
                    <li><a href="services.html">누수 탐지</a></li>
                    <li><a href="services.html">누수 수리</a></li>
                    <li><a href="services.html">피해 복구</a></li>
                    <li><a href="services.html">예방 점검</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3 class="footer-title">바로가기</h3>
                <ul class="footer-links">
                    <li><a href="index.html">홈</a></li>
                    <li><a href="services.html">서비스</a></li>
                    <li><a href="blog.html">블로그</a></li>
                    <li><a href="qna.html">묻고답하기</a></li>
                    <li><a href="contact.html">연락처</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3 class="footer-title">연락처</h3>
                <ul class="footer-contact-info">
                    <li><i class="fas fa-map-marker-alt"></i> 서울특별시 강남구 테헤란로 123</li>
                    <li><i class="fas fa-phone"></i> 02-123-4567</li>
                    <li><i class="fas fa-mobile-alt"></i> 010-1234-5678</li>
                    <li><i class="fas fa-envelope"></i> info@jipkkumida.com</li>
                </ul>
            </div>
        </div>
        
        <div class="copyright">
            <div class="container">
                <p>&copy; 2025 집꾸미다. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <button class="scroll-top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Main JS -->
    <script src="js/main.js"></script>
    
    <!-- Page Specific Script -->
    <script>
        $(document).ready(function() {
            // 로컬 스토리지에서 블로그 게시물 가져오기
            function loadBlogPosts() {
                const blogPosts = JSON.parse(localStorage.getItem('blogPosts')) || [];
                const postsContainer = $('#blog-posts-container');
                const categoryList = $('#category-list');
                const recentPosts = $('#recent-posts');
                const tagCloud = $('#tag-cloud');
                
                // 게시물 컨테이너 초기화
                postsContainer.empty();
                categoryList.empty();
                recentPosts.empty();
                tagCloud.empty();
                
                // 카테고리 집계
                const categories = {};
                const allTags = [];
                
                if (blogPosts.length === 0) {
                    postsContainer.html('<p>등록된 게시물이 없습니다.</p>');
                    return;
                }
                
                // 최신순으로 정렬
                blogPosts.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                // 게시된 포스트만 필터링
                const publishedPosts = blogPosts.filter(post => post.status === 'published');
                
                // 블로그 게시물 표시
                publishedPosts.forEach((post, index) => {
                    // 카테고리 집계
                    categories[post.category] = (categories[post.category] || 0) + 1;
                    
                    // 태그 수집
                    if (post.tags && post.tags.length) {
                        allTags.push(...post.tags);
                    }
                    
                    // 썸네일 이미지 URL (이미지가 없을 경우 기본 이미지 사용)
                    const thumbnailSrc = post.thumbnailSrc || 'https://via.placeholder.com/800x500?text=Blog+Image';
                    
                    // 게시물 HTML 생성
                    postsContainer.append(`
                        <article class="blog-post">
                            <div class="blog-post-image">
                                <img src="${thumbnailSrc}" alt="${post.title}">
                            </div>
                            <div class="blog-post-content">
                                <span class="blog-post-category">${post.category}</span>
                                <h2 class="blog-post-title">
                                    <a href="blog-view.html?id=${post.id}">${post.title}</a>
                                </h2>
                                <p class="blog-post-excerpt">${post.excerpt || post.content.replace(/<[^>]*>/g, '').substring(0, 150)}...</p>
                                <div class="blog-post-meta">
                                    <span class="blog-post-date"><i class="fas fa-calendar-alt"></i> ${post.date}</span>
                                    <span class="blog-post-author"><i class="fas fa-user"></i> ${post.author}</span>
                                </div>
                            </div>
                        </article>
                    `);
                });
                
                // 최근 게시물 목록 (최대 5개)
                // 별도로 최근 게시물 목록 생성 (한번 더 정렬하여 가장 최신글이 상단에 오도록)
                publishedPosts.slice(0, 5).forEach(post => {
                    recentPosts.append(`
                        <li><a href="blog-view.html?id=${post.id}">${post.title}</a></li>
                    `);
                });
                
                // 카테고리 목록 표시
                Object.entries(categories).forEach(([category, count]) => {
                    categoryList.append(`
                        <li><a href="blog.html?category=${encodeURIComponent(category)}">${category} <span class="count">${count}</span></a></li>
                    `);
                });
                
                // 태그 클라우드 표시 (중복 제거)
                const uniqueTags = [...new Set(allTags)];
                uniqueTags.forEach(tag => {
                    tagCloud.append(`
                        <a href="blog.html?tag=${encodeURIComponent(tag)}" class="tag">${tag}</a>
                    `);
                });
            }
            
            // 블로그 검색 기능
            $('#blog-search-form').submit(function(e) {
                e.preventDefault();
                const searchTerm = $(this).find('.search-input').val().trim();
                if (searchTerm) {
                    // 검색어를 URL 파라미터로 추가하고 현재 페이지 리로드
                    window.location.href = `blog.html?q=${encodeURIComponent(searchTerm)}`;
                }
            });
            
            // URL 파라미터에 따른 필터링
            function applyUrlFilters() {
                const urlParams = new URLSearchParams(window.location.search);
                const category = urlParams.get('category');
                const tag = urlParams.get('tag');
                const searchQuery = urlParams.get('q');
                
                if (category || tag || searchQuery) {
                    const blogPosts = JSON.parse(localStorage.getItem('blogPosts')) || [];
                    let filteredPosts = blogPosts.filter(post => post.status === 'published');
                    
                    // 카테고리 필터링
                    if (category) {
                        filteredPosts = filteredPosts.filter(post => post.category === category);
                        // 브레드크럼에 카테고리 표시
                        $('.breadcrumb ol').html(`
                            <li><a href="index.html">홈</a></li>
                            <li><a href="blog.html">블로그</a></li>
                            <li>카테고리: ${category}</li>
                        `);
                    }
                    
                    // 태그 필터링
                    if (tag) {
                        filteredPosts = filteredPosts.filter(post => 
                            post.tags && post.tags.some(t => t.toLowerCase() === tag.toLowerCase())
                        );
                        // 브레드크럼에 태그 표시
                        $('.breadcrumb ol').html(`
                            <li><a href="index.html">홈</a></li>
                            <li><a href="blog.html">블로그</a></li>
                            <li>태그: ${tag}</li>
                        `);
                    }
                    
                    // 검색어 필터링
                    if (searchQuery) {
                        const query = searchQuery.toLowerCase();
                        filteredPosts = filteredPosts.filter(post => 
                            post.title.toLowerCase().includes(query) || 
                            post.content.toLowerCase().includes(query) ||
                            (post.excerpt && post.excerpt.toLowerCase().includes(query)) ||
                            (post.tags && post.tags.some(tag => tag.toLowerCase().includes(query)))
                        );
                        // 브레드크럼에 검색어 표시
                        $('.breadcrumb ol').html(`
                            <li><a href="index.html">홈</a></li>
                            <li><a href="blog.html">블로그</a></li>
                            <li>검색결과: "${searchQuery}"</li>
                        `);
                        
                        // 검색창에 검색어 표시
                        $('.search-input').val(searchQuery);
                    }
                    
                    // 필터링된 게시물 표시
                    displayFilteredPosts(filteredPosts);
                    return true;
                }
                
                return false;
            }
            
            // 필터링된 게시물 표시 함수
            function displayFilteredPosts(posts) {
                const postsContainer = $('#blog-posts-container');
                const recentPosts = $('#recent-posts');
                postsContainer.empty();
                
                if (posts.length === 0) {
                    postsContainer.html('<p>검색 결과가 없습니다.</p>');
                    return;
                }
                
                // 게시물 표시
                posts.forEach(post => {
                    const thumbnailSrc = post.thumbnailSrc || 'https://via.placeholder.com/800x500?text=Blog+Image';
                    
                    postsContainer.append(`
                        <article class="blog-post">
                            <div class="blog-post-image">
                                <img src="${thumbnailSrc}" alt="${post.title}">
                            </div>
                            <div class="blog-post-content">
                                <span class="blog-post-category">${post.category}</span>
                                <h2 class="blog-post-title">
                                    <a href="blog-view.html?id=${post.id}">${post.title}</a>
                                </h2>
                                <p class="blog-post-excerpt">${post.excerpt || post.content.replace(/<[^>]*>/g, '').substring(0, 150)}...</p>
                                <div class="blog-post-meta">
                                    <span class="blog-post-date"><i class="fas fa-calendar-alt"></i> ${post.date}</span>
                                    <span class="blog-post-author"><i class="fas fa-user"></i> ${post.author}</span>
                                </div>
                            </div>
                        </article>
                    `);
                });
                
                // 최근 게시물 목록 업데이트 (최대 5개)
                recentPosts.empty();
                posts.slice(0, 5).forEach(post => {
                    recentPosts.append(`
                        <li><a href="blog-view.html?id=${post.id}">${post.title}</a></li>
                    `);
                });
            }
            
            // 초기 게시물 로드
            const filtered = applyUrlFilters();
            if (!filtered) {
                loadBlogPosts();
            }
        });
    </script>
</body>
</html> 